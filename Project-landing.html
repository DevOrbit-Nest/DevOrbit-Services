<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DevOrbit — Request a Project</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <meta name="description" content="DevOrbit — Order web and desktop projects. Transparent pricing, WhatsApp onboarding, documentation and support.">
  <style>
    :root{--bg:#071527;--card:#071822;--accent1:#06b6d4;--accent2:#7c3aed;--muted:#9fb3bd;--glass:rgba(255,255,255,0.03);--radius:14px;--max:1100px}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#04111a 0%,#071627 100%);color:#e7f3f6;font-family:Inter,system-ui,Arial,-apple-system;}
    .container{max-width:var(--max);margin:28px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#021;letter-spacing:1px;font-size:20px}
    h1{margin:0;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:1fr 420px;gap:26px;margin-top:20px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    .hero h2{margin:0 0 8px;font-size:20px}
    .muted{color:var(--muted);font-size:13px}

    /* options + gallery layout */
    .options-gallery{display:grid;grid-template-columns:1fr 340px;gap:16px}
    .options{display:flex;flex-direction:column;gap:10px}
    .option-btn{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .option-btn.selected{box-shadow:0 8px 30px rgba(12,60,77,0.12);border-color:rgba(6,182,212,0.12)}
    .option-btn.disabled{opacity:0.45;cursor:not-allowed}
    .price{font-weight:700}
    .pkg-desc{color:var(--muted);font-size:13px;margin-top:6px}

    .gallery{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:10px;padding:10px;height:300px;display:flex;flex-direction:column;gap:8px}
    .gallery-main{flex:1;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#03151c}
    .gallery-main img{max-width:100%;max-height:100%;object-fit:cover;border-radius:6px}
    .thumbs{display:flex;gap:8px;overflow-x:auto;padding-top:6px}
    .thumbs img{height:60px;border-radius:8px;cursor:pointer;border:2px solid transparent}
    .thumbs img.active{border-color:var(--accent1)}

    /* form */
    form label{display:block;font-size:13px;margin-bottom:6px}
    input[type=text], textarea, select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    textarea{min-height:100px}
    .row{display:flex;gap:8px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#022;font-weight:700;border:none;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent1)}
    .summary{padding:12px;border-radius:8px;background:linear-gradient(180deg, rgba(6,182,212,0.03), transparent);border:1px solid rgba(6,182,212,0.05)}

    .logo-svg{width:56px;height:56px}
    footer{margin-top:20px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}.options-gallery{grid-template-columns:1fr}.gallery{height:220px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <!-- Inline SVG logo for DevOrbit -->
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 100 100" class="logo-svg" xmlns="http://www.w3.org/3000/svg" role="img">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0" stop-color="#06b6d4" />
                <stop offset="1" stop-color="#7c3aed" />
              </linearGradient>
            </defs>
            <rect rx="18" ry="18" width="100" height="100" fill="url(#g1)" />
            <g transform="translate(18,20) scale(0.7)">
              <circle cx="18" cy="18" r="10" fill="#021" opacity="0.12" />
              <path d="M8 38 L30 18 L52 38 L30 58 Z" fill="#021" opacity="0.12" />
              <text x="10" y="50" font-family="Inter, sans-serif" font-size="34" fill="#021" font-weight="800">DO</text>
            </g>
          </svg>
        </div>
        <div>
          <h1>DevOrbit</h1>
          <p class="lead">We build web & desktop projects. Transparent pricing. WhatsApp onboarding.</p>
        </div>
      </div>
      <div>
        <a class="btn ghost" href="#how">How it works</a>
      </div>
    </header>

    <main class="grid">
      <section>
        <div class="card hero">
          <h2>Request a project — quick & affordable</h2>
          <p class="muted">Choose a package, optionally add documentation or a chatbot, and submit. We'll contact you on WhatsApp to finalize requirements and payments.</p>

          <div style="margin-top:16px" class="options-gallery">
            <div>
              <h3 style="margin-top:0">Packages</h3>
              <div class="options" id="packageList">
                <!-- packages rendered by JS -->
              </div>

              <div style="margin-top:14px">
                <h4>Description</h4>
                <div id="packageDesc" class="muted">Select a package to see a brief description of what it includes.</div>
              </div>

              <div style="margin-top:12px">
                <h4>Documentation includes</h4>
                <div class="muted">Proposal, SRS (Software Requirements Specification), SDS (Software Design Specification), Test plan, System implementation notes, and a User Manual.</div>
              </div>
            </div>

            <div>
              <div class="gallery" id="gallery">
                <div class="gallery-main" id="galleryMain"><img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=1a2b3c4d5e6f7g8h9i0j" alt="sample"></div>
                <div class="thumbs" id="thumbs"></div>
                <div class="muted" style="font-size:12px">Click thumbnails to view larger images. Images update based on selected package.</div>
              </div>
            </div>
          </div>

          <div style="margin-top:18px" id="how">
            <h3>How this works</h3>
            <ol class="muted">
              <li>Pick a project package (Web, Desktop, Chatbot) and whether you want Documentation.</li>
              <li>Submit your selection with your WhatsApp number and a short project title. Our team will contact you on WhatsApp to discuss details (scope, timeline, price confirmation).</li>
              <li>After agreeing we request a fixed deposit of <strong>1,500 KSH</strong>. You will be given payment instructions (e.g., M-Pesa paybill/till).</li>
              <li>We build the project and once delivered we collect the remaining balance and walk you through installation and usage.</li>
              <li>If you already have an idea, we can develop it for you as long as it fits one of the available categories (Web App, Desktop, Chatbot).</li>
            </ol>
            <p class="muted">We value customer satisfaction. Revisions & support policy will be confirmed during WhatsApp onboarding.</p>
          </div>
        </div>

        <div class="card" style="margin-top:16px">
          <h3>Showcase</h3>
          <p class="muted">Preview sample screenshots of previous projects. Selecting a package updates this gallery so you see relevant examples.</p>
        </div>
      </section>

      <aside>
        <div class="card">
          <h3>Start your project</h3>
          <p class="muted">Select a package, optionally add documentation or a chatbot, provide WhatsApp and a short title — we'll contact you.</p>

          <form id="orderForm" onsubmit="return handleSubmit(event)">
            <div style="margin-bottom:10px">
              <label>Choose package</label>
              <div id="pkgOptions"></div>
            </div>

            <div style="margin-bottom:10px">
              <label>Documentation</label>
              <div style="display:flex;gap:8px">
                <label class="option-btn" id="docWith"><input type="radio" name="doc" value="with" style="display:none"> With documentation (+3,000 KSH)</label>
                <label class="option-btn selected" id="docWithout"><input type="radio" name="doc" value="without" style="display:none" checked> Without documentation</label>
                <label class="option-btn" id="docOnly"><input type="radio" name="doc" value="only" style="display:none"> Documentation only (3,000 KSH)</label>
              </div>
            </div>

            <div style="margin-bottom:10px">
              <label>WhatsApp country code</label>
              <select id="cc" style="margin-bottom:8px"><option value="+254" selected>+254 (Kenya)</option><option value="+1">+1 (USA)</option><option value="+44">+44 (UK)</option><option value="+254">Other</option></select>
              <label>WhatsApp number (no plus or spaces)</label>
              <input type="text" id="phone" placeholder="e.g. 712345678" required />
            </div>

            <div style="margin-bottom:10px">
              <label>Project title (short)</label>
              <input type="text" id="title" placeholder="E.g. Inventory system" required />
            </div>

            <div style="margin-bottom:10px">
              <label>Details / Requirements (optional)</label>
              <textarea id="details" placeholder="Describe features, users, colors, pages..."></textarea>
            </div>

            <div class="summary">
              <div class="muted">Order summary</div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px"><div id="selText">No selection</div><div class="price" id="total">0 KSH</div></div>
              <div class="muted" style="margin-top:8px">Deposit required: <strong>1,500 KSH</strong> (fixed). Remaining balance on delivery.</div>
            </div>

            <div style="display:flex;gap:8px;margin-top:12px">
              <button type="submit" class="btn">Submit request</button>
              <button type="button" class="btn ghost" onclick="resetForm()">Reset</button>
            </div>
          </form>

          <p class="muted" style="margin-top:12px">After submission: we'll contact you on WhatsApp to confirm scope, send payment instructions, and begin work once deposit is received.</p>
        </div>

        <div class="card" style="margin-top:12px">
          <h4>Why DevOrbit?</h4>
          <ul class="muted">
            <li>Transparent fixed pricing</li>
            <li>WhatsApp onboarding for quick communication</li>
            <li>Documentation & handover included</li>
            <li>Local payment options supported</li>
          </ul>
        </div>
      </aside>
    </main>

    <footer class="container" style="max-width:var(--max);">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
        <div class="muted">© DevOrbit — Simple project ordering</div>
        <div class="muted">Need a professional to biuld your project? We can help.</div>
      </div>
    </footer>
  </div>

  <script>
    // Configuration: If you want the form to save into Google Sheets, create a Google Apps Script Web App and paste its URL here.
    // Example deployment returns JSON success on POST. Leave blank to download CSV locally instead.
    const SHEET_ENDPOINT = ''; // e.g. 'https://script.google.com/macros/s/XXX/exec'

    const PACKAGES = [
      {id:'web', name:'Web App', price:5000, short:'HTML, CSS, JavaScript frontend; PHP + MySQL backend. Interacted with via a website.', images:[
        'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=1a2b3c4d5e6f7g8h9i0j',
        'https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=4a5b6c7d8e9f0a1b2c3d',
      ], desc: 'A web application includes a frontend (HTML, CSS, JavaScript) and a backend (PHP & MySQL) that processes data. Users interact through their browser.'},
      {id:'desktop', name:'Desktop (VB/C#)', price:3500, short:'Windows desktop application built with Visual Basic or C#. Installs and runs on Windows machines.', images:[
        'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=8f1b2e3b1c2a4d6e7f8a9b0c1d2e3f4a',
        'https://images.unsplash.com/photo-1553851639-93b7e1c1a6b3?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a',
      ], desc:'Windows desktop application using Visual Basic or C#. Good for local tools that require direct OS access.'},
      {id:'chatbot', name:'Chatbot', price:3500, short:'A conversational chatbot that can be embedded into websites or messaging platforms for guided interactions.', images:[
        'https://images.unsplash.com/photo-1523475496153-3d6ccf4f4f0b?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=2b3c4d5e6f7g8h9i0j1k',
        'https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=3c4d5e6f7g8h9i0j1k2l',
      ], desc:'A chatbot provides automated conversational flows for FAQs, lead capture, or guided assistance.'},
      {id:'mobile', name:'Mobile App (coming soon)', price:7000, short:'Android apps using Java/Kotlin. Coming soon.', images:[], desc:'Not available yet.'},
      {id:'ai', name:'AI Integration (coming soon)', price:7000, short:'AI features & integrations. Coming soon.', images:[], desc:'Not available yet.'}
    ];

    // Render package buttons
    const pkgOptions = document.getElementById('pkgOptions');
    const packageList = document.getElementById('packageList');
    PACKAGES.forEach(p=>{
      // left column list
      const btn = document.createElement('div'); btn.className='option-btn'+(p.images.length===0? ' disabled':''); btn.dataset.id=p.id;
      btn.innerHTML = `<div><strong>${p.name}</strong><div class="pkg-desc">${p.short}</div></div><div class="price">${p.price.toLocaleString()} KSH</div>`;
      packageList.appendChild(btn);

      // right column condensed options
      const li = document.createElement('div'); li.className='option-btn'+(p.images.length===0? ' disabled':''); li.dataset.id=p.id; li.style.marginBottom='8px';
      li.innerHTML = `<div style="font-weight:600">${p.name}</div><div class="price">${p.price.toLocaleString()} KSH</div>`;
      pkgOptions.appendChild(li);

      [btn, li].forEach(el=>{
        el.addEventListener('click', ()=>{
          if(el.classList.contains('disabled')) return;
          document.querySelectorAll('.option-btn').forEach(o=>o.classList.remove('selected'));
          el.classList.add('selected');
          // mark matching on other column
          document.querySelectorAll('#pkgOptions .option-btn, #packageList .option-btn').forEach(o=>{ if(o.dataset.id===el.dataset.id) o.classList.add('selected'); else o.classList.remove('selected'); });
          // set radio (create hidden input)
          setSelectedPackage(el.dataset.id);
        });
      });
    });

    // package selection state
    let selectedPackage = null;
    function setSelectedPackage(id){
      selectedPackage = PACKAGES.find(x=>x.id===id);
      updateSummary();
      updateGallery();
      // update description
      document.getElementById('packageDesc').textContent = selectedPackage ? selectedPackage.desc : 'Select a package to see a brief description.';
    }

    // gallery functions
    const galleryMain = document.getElementById('galleryMain');
    const thumbs = document.getElementById('thumbs');
    function updateGallery(){
      thumbs.innerHTML='';
      if(!selectedPackage || !selectedPackage.images || selectedPackage.images.length===0){
        galleryMain.innerHTML = '<div class="muted">No samples available for this package.</div>';
        return;
      }
      // show first image
      galleryMain.innerHTML = `<img src="${selectedPackage.images[0]}" alt="sample">`;
      selectedPackage.images.forEach((src,i)=>{
        const t = document.createElement('img'); t.src=src; if(i===0) t.classList.add('active'); t.addEventListener('click', ()=>{ galleryMain.innerHTML = `<img src="${src}" alt="sample">`; document.querySelectorAll('#thumbs img').forEach(im=>im.classList.remove('active')); t.classList.add('active'); }); thumbs.appendChild(t);
      });
    }

    // doc options toggles
    ['docWith','docWithout','docOnly'].forEach(id=>{ const el=document.getElementById(id); el.addEventListener('click', ()=>{ document.querySelectorAll('#docWith,#docWithout,#docOnly').forEach(x=>x.classList.remove('selected')); el.classList.add('selected'); updateSummary(); }); });

    function getDocChoice(){ if(document.getElementById('docOnly').classList.contains('selected')) return 'only'; if(document.getElementById('docWith').classList.contains('selected')) return 'with'; return 'without'; }

    // initial defaults
    // select web by default
    setSelectedPackage('web');

    // pricing & summary
    function updateSummary(){
      const doc = getDocChoice();
      let total = 0; let parts = [];
      if(selectedPackage){ total += selectedPackage.price; parts.push(selectedPackage.name + ` (${selectedPackage.price.toLocaleString()} KSH)`); }
      // if documentation only selected
      if(doc==='only'){ total = PACKAGES.find(x=>x.id==='web') ? 3000 : 3000; parts = ['Documentation only (3,000 KSH)']; }
      else if(doc==='with'){ total += 3000; parts.push('Documentation (3,000 KSH)'); }
      document.getElementById('selText').textContent = parts.length ? parts.join(' + ') : 'No selection';
      document.getElementById('total').textContent = total ? `${total.toLocaleString()} KSH` : '0 KSH';
    }

    function resetForm(){
      document.getElementById('orderForm').reset(); document.querySelectorAll('.option-btn').forEach(o=>o.classList.remove('selected'));
      setSelectedPackage('web'); document.getElementById('cc').value='+254'; document.getElementById('phone').value=''; document.getElementById('title').value=''; document.getElementById('details').value=''; document.getElementById('docWithout').classList.add('selected'); updateSummary();
    }

    // normalize phone
    function normalizePhone(cc, phone){ phone = phone.replace(/\D+/g,''); if(phone.startsWith('0')) phone = phone.substring(1); if(phone.length > 9 && phone.startsWith(cc.replace('+',''))){ phone = phone.substring(cc.replace('+','').length); } return cc.replace('+','') + phone; }

    // helper: download CSV if no endpoint
    function downloadCSV(row, filename='request.csv'){
      const csv = Object.keys(row).join(',') + '\n' + Object.values(row).map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = filename; a.click(); URL.revokeObjectURL(url);
    }

    async function handleSubmit(e){
      e.preventDefault();
      if(!selectedPackage){ alert('Please select a package.'); return false; }
      const phoneRaw = document.getElementById('phone').value.trim(); const cc = document.getElementById('cc').value; const title = document.getElementById('title').value.trim(); const details = document.getElementById('details').value.trim();
      if(!phoneRaw){ alert('Enter your WhatsApp number.'); return false; }
      if(!title){ alert('Enter a short project title.'); return false; }
      const phone = normalizePhone(cc, phoneRaw);

      const doc = getDocChoice();
      let total = 0; let parts = [];
      if(doc==='only'){ total = 3000; parts = ['Documentation only']; }
      else { total += selectedPackage.price; parts.push(selectedPackage.name); if(doc==='with'){ total += 3000; parts.push('Documentation'); } }

      const payload = {
        phone_number: phone,
        project_type: parts.join(' + '),
        total_amount: total,
        deposit_paid: 'No',
        completed_documentation: 'No',
        completed_project: 'No',
        delivered_and_cleared: 'No',
        title: title,
        details: details,
        timestamp: new Date().toISOString()
      };

      if(SHEET_ENDPOINT){
        try{
          const res = await fetch(SHEET_ENDPOINT, {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
          const data = await res.json();
          if(data && (data.result==='success' || data.status===200 || data.success)){
            alert('Request saved. We will contact you on WhatsApp shortly.');
            resetForm();
            return false;
          } else {
            console.warn('Sheet response:', data); alert('Could not save to Google Sheets. Check console.');
          }
        }catch(err){ console.error(err); alert('Failed to save request to the configured endpoint. Downloading a local copy instead.'); downloadCSV(payload); resetForm(); return false; }
      } else {
        // fallback: download CSV so you can manually upload
        downloadCSV(payload, 'devorbit-request-' + Date.now() + '.csv');
        alert('No Google Sheets endpoint configured — we downloaded a CSV copy of your request. Please send it to the DevOrbit team.');
        resetForm();
        return false;
      }
    }

    // On load
    window.addEventListener('load', ()=>{ updateGallery(); updateSummary(); });
  </script>
</body>
</html>
